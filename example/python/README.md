# MagicBot Z1 SDK Python Binding Configuration Guide

This document describes how to configure the Python binding environment for MagicBot Z1 SDK so that `example.py` can run normally.

## Prerequisites

Ensure your system has the following dependencies installed:

- **CMake** (version >= 3.16)
- **Python3** (including development modules)
- **C++ Compiler** (supporting C++20 standard)
- **Eigen3** library

### Installing Dependencies on Ubuntu/Debian Systems

```bash
sudo apt update
sudo apt install cmake python3 python3-dev python3-pip libeigen3-dev build-essential
```

## Build Steps

### 1. Clone and Enter Project Directory

```bash
cd /path/to/magicbot_z1_sdk
```

### 2. Execute Build Script

```bash
./build.sh
```

The build process will:
- Compile the project in the `build/` directory
- Generate Python binding module `magicbot_z1_python.cpython-310-x86_64-linux-gnu.so`
- Install to the `build/install/` directory

### 3. Verify Build Results

After the build is complete, you should find the Python binding files at the following locations:

- `build/magicbot_z1_python.cpython-310-x86_64-linux-gnu.so`
- `build/install/lib/magicbot_z1_python.cpython-310-x86_64-linux-gnu.so`

## Environment Variable Configuration

### Method 1: Temporary Environment Variable Setup (Recommended for Testing)

Before running `example.py`, set the following environment variables:

```bash
cd example/python

# Set Python path to point to build directory
export PYTHONPATH=../../build:$PYTHONPATH

# Run example
python3 example.py
```

### Method 2: Using Installation Directory

If you used the installation feature, you can also use the installation directory:

```bash
export PYTHONPATH=${INSTALL_DIR}/lib:$PYTHONPATH
```

## Running Examples

After configuring environment variables, run the example:

```bash
cd example/python
python3 example.py
```

If configured correctly, you should see output:
```
Magicbot Z1
```

## Troubleshooting

### 1. ImportError: No module named 'magicbot_z1_python'

**Solution:**
- Check if `PYTHONPATH` is set correctly
- Confirm Python binding file exists at the specified path
- Verify Python version compatibility

```bash
# Check environment variables
echo $PYTHONPATH

# Check if file exists
ls -la /path/to/magicbot_z1_sdk/build/magicbot_z1_python.cpython-*.so
```

### 2. Library File Not Found Error

**Solution:**
- Set `LD_LIBRARY_PATH` environment variable
- Ensure all dependency libraries are in the path

```bash
export LD_LIBRARY_PATH=/path/to/magicbot_z1_sdk/build/install/lib:$LD_LIBRARY_PATH
```

### 3. Python Version Mismatch

**Solution:**
- Confirm the Python version used matches the version used during build
- Rebuild to match current Python version

```bash
# Check Python version
python3 --version

# Rebuild
./build.sh
```

## Notes

- Ensure absolute paths are used when setting environment variables
- Environment variables may need to be reset after each rebuild
- Binding file names generated by different Python versions may differ
- In production environments, it's recommended to use installation directory instead of build directory

## Related Files

- `example.py` - Python example code
- `build.sh` - Build script
- `python/CMakeLists.txt` - Python binding build configuration
- `CMakeLists.txt` - Main build configuration
  