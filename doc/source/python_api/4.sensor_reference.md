---
title: 传感器控制服务
createTime: 2025/01/27 10:23:13
permalink: /human-z1/python_sensor_reference/
---
# 传感器服务 (Python)

> 提供机器人系统传感器（雷达/RGBD相机/双目相机）服务，通过SensorController可以通过RPC和话题方式实现对机器人的传感器进行指令控制和状态获取。

## 接口定义
`SensorController` 是封装机器人各类传感器的管理类，支持Lidar、RGBD 相机与双目相机的初始化、控制与数据订阅。

> ⚠️ **Notice:** 当前RGBD传感器接口暂未完全开放。

### SensorController
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>类名</td>
      <td>SensorController</td>
    </tr>
    <tr>
      <td>构造函数</td>
      <td><code>controller = SensorController()</code></td>
    </tr>
    <tr>
      <td>功能概述</td>
      <td>构造函数，初始化传感器控制器对象。</td>
    </tr>
    <tr>
      <td>备注</td>
      <td>构造内部状态。</td>
    </tr>
  </tbody>
</table>

### initialize
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>函数名</td>
      <td>initialize</td>
    </tr>
    <tr>
      <td>函数声明</td>
      <td><code>bool initialize()</code></td>
    </tr>
    <tr>
      <td>功能概述</td>
      <td>初始化控制器，包括资源申请和驱动加载。</td>
    </tr>
    <tr>
      <td>返回值</td>
      <td><code>True</code> 表示成功，<code>False</code> 表示失败。</td>
    </tr>
    <tr>
      <td>备注</td>
      <td>调用前需先构造对象。</td>
    </tr>
  </tbody>
</table>

### shutdown
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>函数名</td>
      <td>shutdown</td>
    </tr>
    <tr>
      <td>函数声明</td>
      <td><code>void shutdown()</code></td>
    </tr>
    <tr>
      <td>功能概述</td>
      <td>关闭所有传感器连接并释放资源。</td>
    </tr>
    <tr>
      <td>备注</td>
      <td>配合 initialize 使用。</td>
    </tr>
  </tbody>
</table>

### open_lidar
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>函数名</td>
      <td>open_lidar</td>
    </tr>
    <tr>
      <td>函数声明</td>
      <td><code>Status open_lidar()</code></td>
    </tr>
    <tr>
      <td>功能概述</td>
      <td>打开雷达。</td>
    </tr>
    <tr>
      <td>返回值</td>
      <td><code>Status</code> 对象，<code>Status.code == ErrorCode.OK</code> 表示成功。</td>
    </tr>
    <tr>
      <td>备注</td>
      <td>阻塞接口。</td>
    </tr>
  </tbody>
</table>

### close_lidar
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>函数名</td>
      <td>close_lidar</td>
    </tr>
    <tr>
      <td>函数声明</td>
      <td><code>Status close_lidar()</code></td>
    </tr>
    <tr>
      <td>功能概述</td>
      <td>关闭雷达。</td>
    </tr>
    <tr>
      <td>返回值</td>
      <td><code>Status</code> 对象，<code>Status.code == ErrorCode.OK</code> 表示成功。</td>
    </tr>
    <tr>
      <td>备注</td>
      <td>阻塞接口，配合打开函数使用。</td>
    </tr>
  </tbody>
</table>

### open_head_rgbd_camera
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>函数名</td>
      <td>open_head_rgbd_camera</td>
    </tr>
    <tr>
      <td>函数声明</td>
      <td><code>Status open_head_rgbd_camera()</code></td>
    </tr>
    <tr>
      <td>功能概述</td>
      <td>打开头部 RGBD 相机。</td>
    </tr>
    <tr>
      <td>返回值</td>
      <td><code>Status</code> 对象，<code>Status.code == ErrorCode.OK</code> 表示成功。</td>
    </tr>
    <tr>
      <td>备注</td>
      <td>阻塞接口。</td>
    </tr>
  </tbody>
</table>

### close_head_rgbd_camera
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>函数名</td>
      <td>close_head_rgbd_camera</td>
    </tr>
    <tr>
      <td>函数声明</td>
      <td><code>Status close_head_rgbd_camera()</code></td>
    </tr>
    <tr>
      <td>功能概述</td>
      <td>关闭头部 RGBD 相机。</td>
    </tr>
    <tr>
      <td>返回值</td>
      <td><code>Status</code> 对象，<code>Status.code == ErrorCode.OK</code> 表示成功。</td>
    </tr>
    <tr>
      <td>备注</td>
      <td>阻塞接口，配合打开函数使用。</td>
    </tr>
  </tbody>
</table>

### open_binocular_camera
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>函数名</td>
      <td>open_binocular_camera</td>
    </tr>
    <tr>
      <td>函数声明</td>
      <td><code>Status open_binocular_camera()</code></td>
    </tr>
    <tr>
      <td>功能概述</td>
      <td>打开双目相机。</td>
    </tr>
    <tr>
      <td>返回值</td>
      <td><code>Status</code> 对象，<code>Status.code == ErrorCode.OK</code> 表示成功。</td>
    </tr>
    <tr>
      <td>备注</td>
      <td>阻塞接口。</td>
    </tr>
  </tbody>
</table>

### close_binocular_camera
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>函数名</td>
      <td>close_binocular_camera</td>
    </tr>
    <tr>
      <td>函数声明</td>
      <td><code>Status close_binocular_camera()</code></td>
    </tr>
    <tr>
      <td>功能概述</td>
      <td>关闭双目相机。</td>
    </tr>
    <tr>
      <td>返回值</td>
      <td><code>Status</code> 对象，<code>Status.code == ErrorCode.OK</code> 表示成功。</td>
    </tr>
    <tr>
      <td>备注</td>
      <td>阻塞接口，配合打开函数使用。</td>
    </tr>
  </tbody>
</table>

### subscribe_lidar_imu
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>函数名</td>
      <td>subscribe_lidar_imu</td>
    </tr>
    <tr>
      <td>函数声明</td>
      <td><code>void subscribe_lidar_imu(callback)</code></td>
    </tr>
    <tr>
      <td>功能概述</td>
      <td>订阅雷达 IMU 数据</td>
    </tr>
    <tr>
      <td>参数说明</td>
      <td>callback：接收到数据后的处理函数</td>
    </tr>
    <tr>
      <td>备注</td>
      <td>非阻塞接口，回调函数会在数据更新时被调用。</td>
    </tr>
  </tbody>
</table>

### subscribe_lidar_point_cloud
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>函数名</td>
      <td>subscribe_lidar_point_cloud</td>
    </tr>
    <tr>
      <td>函数声明</td>
      <td><code>void subscribe_lidar_point_cloud(callback)</code></td>
    </tr>
    <tr>
      <td>功能概述</td>
      <td>订阅雷达点云数据</td>
    </tr>
    <tr>
      <td>参数说明</td>
      <td>callback：接收到点云后的处理函数</td>
    </tr>
    <tr>
      <td>备注</td>
      <td>非阻塞接口，回调函数会在数据更新时被调用。</td>
    </tr>
  </tbody>
</table>

### subscribe_head_rgbd_color_image
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>函数名</td>
      <td>subscribe_head_rgbd_color_image</td>
    </tr>
    <tr>
      <td>函数声明</td>
      <td><code>void subscribe_head_rgbd_color_image(callback)</code></td>
    </tr>
    <tr>
      <td>功能概述</td>
      <td>订阅头部 RGBD 彩色图像数据</td>
    </tr>
    <tr>
      <td>参数说明</td>
      <td>callback：接收到图像后的处理函数</td>
    </tr>
    <tr>
      <td>备注</td>
      <td>非阻塞接口，回调函数会在数据更新时被调用。</td>
    </tr>
  </tbody>
</table>

### subscribe_head_rgbd_depth_image
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>函数名</td>
      <td>subscribe_head_rgbd_depth_image</td>
    </tr>
    <tr>
      <td>函数声明</td>
      <td><code>void subscribe_head_rgbd_depth_image(callback)</code></td>
    </tr>
    <tr>
      <td>功能概述</td>
      <td>订阅头部 RGBD 深度图像数据</td>
    </tr>
    <tr>
      <td>参数说明</td>
      <td>callback：接收到深度图像后的处理函数</td>
    </tr>
    <tr>
      <td>备注</td>
      <td>非阻塞接口，回调函数会在数据更新时被调用。</td>
    </tr>
  </tbody>
</table>

### subscribe_head_rgbd_camera_info
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>函数名</td>
      <td>subscribe_head_rgbd_camera_info</td>
    </tr>
    <tr>
      <td>函数声明</td>
      <td><code>void subscribe_head_rgbd_camera_info(callback)</code></td>
    </tr>
    <tr>
      <td>功能概述</td>
      <td>订阅头部 RGBD 相机参数数据</td>
    </tr>
    <tr>
      <td>参数说明</td>
      <td>callback：接收到相机内参信息后的处理函数</td>
    </tr>
    <tr>
      <td>备注</td>
      <td>非阻塞接口，回调函数会在数据更新时被调用。</td>
    </tr>
  </tbody>
</table>

### subscribe_binocular_image
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>函数名</td>
      <td>subscribe_binocular_image</td>
    </tr>
    <tr>
      <td>函数声明</td>
      <td><code>void subscribe_binocular_image(callback)</code></td>
    </tr>
    <tr>
      <td>功能概述</td>
      <td>订阅双目相机图像帧数据</td>
    </tr>
    <tr>
      <td>参数说明</td>
      <td>callback：接收到双目相机数据后的处理函数</td>
    </tr>
    <tr>
      <td>备注</td>
      <td>非阻塞接口，回调函数会在数据更新时被调用。</td>
    </tr>
  </tbody>
</table>

### subscribe_binocular_camera_info
<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 40%; text-align: center;"><strong>项目</strong></th>
      <th style="width: 60%; text-align: center;"><strong>内容</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>函数名</td>
      <td>subscribe_binocular_camera_info</td>
    </tr>
    <tr>
      <td>函数声明</td>
      <td><code>void subscribe_binocular_camera_info(callback)</code></td>
    </tr>
    <tr>
      <td>功能概述</td>
      <td>订阅双目相机参数数据</td>
    </tr>
    <tr>
      <td>参数说明</td>
      <td>callback：接收到相机内参信息后的处理函数</td>
    </tr>
    <tr>
      <td>备注</td>
      <td>非阻塞接口，回调函数会在数据更新时被调用。</td>
    </tr>
  </tbody>
</table>

## 数据类型

### Imu
IMU 数据结构，包含姿态、角速度、线性加速度等传感器数据。

<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 20%; text-align: center;"><strong>字段名</strong></th>
      <th style="width: 20%; text-align: center;"><strong>类型</strong></th>
      <th style="width: 60%; text-align: center;"><strong>描述</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>timestamp</code></td>
      <td><code>int64_t</code></td>
      <td>时间戳（纳秒）</td>
    </tr>
    <tr>
      <td><code>temperature</code></td>
      <td><code>float</code></td>
      <td>温度（摄氏度）</td>
    </tr>
    <tr>
      <td><code>orientation</code></td>
      <td><code>Quaternion</code></td>
      <td>姿态四元数</td>
    </tr>
    <tr>
      <td><code>angular_velocity</code></td>
      <td><code>Vector3</code></td>
      <td>角速度（rad/s）</td>
    </tr>
    <tr>
      <td><code>linear_acceleration</code></td>
      <td><code>Vector3</code></td>
      <td>线性加速度（m/s²）</td>
    </tr>
  </tbody>
</table>

### PointCloud2
点云数据结构，包含三维点云信息。

<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 20%; text-align: center;"><strong>字段名</strong></th>
      <th style="width: 20%; text-align: center;"><strong>类型</strong></th>
      <th style="width: 60%; text-align: center;"><strong>描述</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>header</code></td>
      <td><code>Header</code></td>
      <td>标准消息头（时间戳+frame_id）</td>
    </tr>
    <tr>
      <td><code>height</code></td>
      <td><code>int32_t</code></td>
      <td>点云高度（行数）</td>
    </tr>
    <tr>
      <td><code>width</code></td>
      <td><code>int32_t</code></td>
      <td>点云宽度（列数）</td>
    </tr>
    <tr>
      <td><code>fields</code></td>
      <td><code>list[PointField]</code></td>
      <td>点字段数组</td>
    </tr>
    <tr>
      <td><code>is_bigendian</code></td>
      <td><code>bool</code></td>
      <td>字节序</td>
    </tr>
    <tr>
      <td><code>point_step</code></td>
      <td><code>int32_t</code></td>
      <td>每个点占用的字节数</td>
    </tr>
    <tr>
      <td><code>row_step</code></td>
      <td><code>int32_t</code></td>
      <td>每行占用的字节数</td>
    </tr>
    <tr>
      <td><code>data</code></td>
      <td><code>list[uint8_t]</code></td>
      <td>原始点云数据（按字段打包）</td>
    </tr>
    <tr>
      <td><code>is_dense</code></td>
      <td><code>bool</code></td>
      <td>是否为稠密点云（无无效点）</td>
    </tr>
  </tbody>
</table>

### Image
图像数据结构，支持多种编码格式。

<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 20%; text-align: center;"><strong>字段名</strong></th>
      <th style="width: 20%; text-align: center;"><strong>类型</strong></th>
      <th style="width: 60%; text-align: center;"><strong>描述</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>header</code></td>
      <td><code>Header</code></td>
      <td>标准消息头（时间戳+frame_id）</td>
    </tr>
    <tr>
      <td><code>height</code></td>
      <td><code>int32_t</code></td>
      <td>图像高度（像素）</td>
    </tr>
    <tr>
      <td><code>width</code></td>
      <td><code>int32_t</code></td>
      <td>图像宽度（像素）</td>
    </tr>
    <tr>
      <td><code>encoding</code></td>
      <td><code>str</code></td>
      <td>图像编码类型，如 "rgb8", "mono8", "bgr8"</td>
    </tr>
    <tr>
      <td><code>is_bigendian</code></td>
      <td><code>bool</code></td>
      <td>数据是否为大端模式</td>
    </tr>
    <tr>
      <td><code>step</code></td>
      <td><code>int32_t</code></td>
      <td>每行图像占用的字节数</td>
    </tr>
    <tr>
      <td><code>data</code></td>
      <td><code>list[uint8_t]</code></td>
      <td>原始图像字节数据</td>
    </tr>
  </tbody>
</table>

### CameraInfo
相机内参与畸变信息，通常与 Image 消息一起发布。

<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 20%; text-align: center;"><strong>字段名</strong></th>
      <th style="width: 20%; text-align: center;"><strong>类型</strong></th>
      <th style="width: 60%; text-align: center;"><strong>描述</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>header</code></td>
      <td><code>Header</code></td>
      <td>标准消息头（时间戳+frame_id）</td>
    </tr>
    <tr>
      <td><code>height</code></td>
      <td><code>int32_t</code></td>
      <td>图像高度（行数）</td>
    </tr>
    <tr>
      <td><code>width</code></td>
      <td><code>int32_t</code></td>
      <td>图像宽度（列数）</td>
    </tr>
    <tr>
      <td><code>distortion_model</code></td>
      <td><code>str</code></td>
      <td>畸变模型，例如 "plumb_bob"</td>
    </tr>
    <tr>
      <td><code>D</code></td>
      <td><code>list[double]</code></td>
      <td>畸变参数数组</td>
    </tr>
    <tr>
      <td><code>K</code></td>
      <td><code>list[double]</code></td>
      <td>相机内参矩阵（9个元素）</td>
    </tr>
    <tr>
      <td><code>R</code></td>
      <td><code>list[double]</code></td>
      <td>矫正矩阵（9个元素）</td>
    </tr>
    <tr>
      <td><code>P</code></td>
      <td><code>list[double]</code></td>
      <td>投影矩阵（12个元素）</td>
    </tr>
    <tr>
      <td><code>binning_x</code></td>
      <td><code>int32_t</code></td>
      <td>水平binning系数</td>
    </tr>
    <tr>
      <td><code>binning_y</code></td>
      <td><code>int32_t</code></td>
      <td>垂直binning系数</td>
    </tr>
    <tr>
      <td><code>roi_x_offset</code></td>
      <td><code>int32_t</code></td>
      <td>ROI起始x</td>
    </tr>
    <tr>
      <td><code>roi_y_offset</code></td>
      <td><code>int32_t</code></td>
      <td>ROI起始y</td>
    </tr>
    <tr>
      <td><code>roi_height</code></td>
      <td><code>int32_t</code></td>
      <td>ROI高度</td>
    </tr>
    <tr>
      <td><code>roi_width</code></td>
      <td><code>int32_t</code></td>
      <td>ROI宽度</td>
    </tr>
    <tr>
      <td><code>roi_do_rectify</code></td>
      <td><code>bool</code></td>
      <td>是否进行矫正</td>
    </tr>
  </tbody>
</table>

### BinocularCameraFrame
双目相机帧数据结构，包含格式和图像帧。

<table style="width: 100%; table-layout: fixed; border-collapse: collapse; text-align: left;">
  <thead>
    <tr>
      <th style="width: 20%; text-align: center;"><strong>字段名</strong></th>
      <th style="width: 20%; text-align: center;"><strong>类型</strong></th>
      <th style="width: 60%; text-align: center;"><strong>描述</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>header</code></td>
      <td><code>Header</code></td>
      <td>通用消息头（时间戳+frame_id）</td>
    </tr>
    <tr>
      <td><code>format</code></td>
      <td><code>str</code></td>
      <td>图像格式</td>
    </tr>
    <tr>
      <td><code>data</code></td>
      <td><code>list[uint8_t]</code></td>
      <td>左目和右目拼接图像数据，左半为左目图像，右半为右目图像</td>
    </tr>
  </tbody>
</table>
